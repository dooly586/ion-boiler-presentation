<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>KCL 공식 테스트 결과</title>

<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet"/>
<script src="https://d3js.org/d3.v7.min.js"></script>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  body { width: 1280px; min-height: 720px; overflow-y: auto; overflow-x: hidden; margin: 0; padding: 0; touch-action: pan-y; pointer-events: auto; }
  .slide { width: 1280px; min-height: 720px; position: relative;
           background: linear-gradient(135deg, #f0f9ff 0%, #e6f7ef 100%); }
  .grid-pattern { position: absolute; width: 100%; height: 100%;
    background-image:
      linear-gradient(rgba(0,150,136,0.05) 1px, transparent 1px),
      linear-gradient(90deg, rgba(0,150,136,0.05) 1px, transparent 1px);
    background-size: 20px 20px; }
  .title-box { background: rgba(255,255,255,0.9); border-left: 5px solid #009688; }
  .content-card { background: rgba(255,255,255,0.9); border-left: 4px solid #009688; }
  .icon-circle { background: rgba(0,150,136,0.1); border: 2px solid rgba(0,150,136,0.3); }
  .highlight-text { color: #009688; font-weight: bold; }
  .result-card { background: rgba(0,150,136,0.1); border: 1px solid rgba(0,150,136,0.3); }
  .chart-container { background: #fff; border-radius: 8px;
                     box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
  .report-button { 
    background: linear-gradient(135deg, #009688, #00796B);
    color: white; border: none; border-radius: 8px;
    padding: 10px 20px; font-size: 14px; font-weight: 600;
    cursor: pointer; transition: all 0.3s ease;
    display: inline-flex; align-items: center; gap: 8px;
    box-shadow: 0 2px 4px rgba(0,150,136,0.3);
  }
  .report-button:hover {
    background: linear-gradient(135deg, #00796B, #004D40);
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,150,136,0.4);
  }
  .physics-link {
    color: #009688;
    text-decoration: underline;
    font-weight: bold;
    cursor: pointer;
    transition: color 0.3s ease;
  }
  .physics-link:hover {
    color: #00796B;
    text-decoration: underline;
  }
  /* Language switcher */
  .lang-switcher {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 1000;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 25px;
    padding: 8px 16px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  }
  .lang-switcher a {
    text-decoration: none;
    color: #009688;
    font-weight: 600;
    font-size: 14px;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    transition: color 0.3s ease;
  }
  .lang-switcher a:hover {
    color: #00796b;
  }
  
  html {
    overflow-y: auto;
    overflow-x: hidden;
  }
  
  /* 스크롤바 스타일링 */
  body::-webkit-scrollbar {
    width: 8px;
  }
  body::-webkit-scrollbar-track {
    background: rgba(0,0,0,0.1);
    border-radius: 4px;
  }
  body::-webkit-scrollbar-thumb {
    background: rgba(0,150,136,0.5);
    border-radius: 4px;
  }
  body::-webkit-scrollbar-thumb:hover {
    background: rgba(0,150,136,0.7);
  }
  
  /* Mobile touch scroll optimization */
  @media (max-width: 768px) {
    body {
      width: 100vw;
      min-width: 320px;
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
    }
    
    .slide {
      width: max(100vw, 800px);
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
    }
    
    .title-box {
      min-width: 800px;
      padding: 12px 16px;
    }
    
    .title-box h1 {
      font-size: 24px;
    }
    
    .flex.flex-1 {
      min-width: 800px;
      flex-direction: column;
    }
    
    .w-1/2 {
      width: 100%;
      min-width: 780px;
      margin-bottom: 20px;
    }
    
    /* Scrollbar styling */
    body::-webkit-scrollbar,
    .slide::-webkit-scrollbar {
      height: 8px;
    }
    body::-webkit-scrollbar-track,
    .slide::-webkit-scrollbar-track {
      background: rgba(0,0,0,0.1);
      border-radius: 4px;
    }
    body::-webkit-scrollbar-thumb,
    .slide::-webkit-scrollbar-thumb {
      background: rgba(0,150,136,0.5);
      border-radius: 4px;
    }
  }
  
  @media (max-width: 480px) {
    .slide {
      min-width: 600px;
    }
    .title-box h1 {
      font-size: 20px;
    }
  }
</style>
</head>
<body>
<!-- Language Switcher -->
<div class="lang-switcher">
    <a href="../en/page_4.html">
        <i class="fas fa-globe"></i> English
    </a>
</div>
<div class="slide flex flex-col" style="overflow: hidden;">
  <!-- Background pattern -->
  <div class="grid-pattern"></div>

  <!-- Title -->
  <div class="title-box w-full py-2 px-10 mb-3 z-10">
    <h1 class="text-3xl font-bold text-gray-800">KCL 공식 테스트 결과</h1>
  </div>

  <!-- Main content: left-right column with bottom alignment applied -->
  <div class="flex flex-1 px-10 pb-2 z-10 items-stretch gap-4">
    <!-- Left column -->
    <div class="w-1/2 pr-0 flex flex-col">
      <div class="content-card p-3 rounded-lg shadow-md mb-3 flex-1">
        <div class="flex items-center mb-2">
          <div class="icon-circle w-10 h-10 rounded-full flex items-center justify-center mr-3">
            <i class="fas fa-flask text-green-600"></i>
          </div>
          <h2 class="text-2xl font-semibold text-gray-800">KCL 공식 실증시험</h2>
        </div>
        <p class="text-gray-700 mb-2">
          이온히팅보일러는 한국건설생활환경시험연구원(KCL)의 공식 실증시험을 통해 객관적인 성능 검증을 받았습니다.
        </p>
        <div class="bg-gray-100 p-2 rounded-lg mb-3">
          <h3 class="text-lg font-semibold text-gray-700 mb-1">시험 조건</h3>
          <ul class="list-disc pl-5 text-gray-700">
            <li>외부 온도: <span class="highlight-text">-12.5℃ ~ +5℃</span></li>
            <li>내부 온도: <span class="highlight-text">25℃</span> 유지</li>
            <li>비교 대상: 미쓰비시 인버터 히트펌프 (COP 3.2)</li>
          </ul>
        </div>
        <p class="text-gray-700 mb-3">
          이 테스트 결과는 이온히팅보일러가 기존 히트펌프 대비 우수한 에너지 효율과 탄소 저감 효과를 가지고 있음을 명확히 증명합니다.
        </p>
        <div class="text-center">
          <button class="report-button" onclick="openKCLReport()">
            <i class="fas fa-file-pdf"></i>
            KCL 시험성적서 보기
          </button>
        </div>
      </div>

      <div class="content-card p-3 rounded-lg shadow-md">
        <div class="flex items-center mb-2">
          <div class="icon-circle w-10 h-10 rounded-full flex items-center justify-center mr-3">
            <i class="fas fa-lightbulb text-green-600"></i>
          </div>
          <h2 class="text-2xl font-semibold text-gray-800">주요 발견사항</h2>
        </div>
        <ul class="space-y-3 text-gray-700">
          <li class="flex items-start">
            <i class="fas fa-check-circle text-green-600 mt-1 mr-2"></i>
            <span>이온히팅보일러는 <span class="highlight-text">28.1% 전력 소모량 감소</span>를 달성했습니다.</span>
          </li>
          <li class="flex items-start">
            <i class="fas fa-check-circle text-green-600 mt-1 mr-2"></i>
            <span>탄소 배출량은 <span class="highlight-text">43% 감소</span>되었습니다.</span>
          </li>
          <li class="flex items-start">
            <i class="fas fa-check-circle text-green-600 mt-1 mr-2"></i>
            <span>온도 제어 정확도: ±0.1℃</span>
          </li>
          <li class="flex items-start">
            <i class="fas fa-check-circle text-green-600 mt-1 mr-2"></i>
            <span>가열 속도: 기존 전기보일러 대비 약 2배 빨라</span>
          </li>
        </ul>
      </div>
    </div>

    <!-- Right column -->
    <div class="w-1/2 pl-0 flex flex-col">
      <div class="chart-container p-3 mb-3 flex-1">
        <h3 class="text-xl font-semibold text-gray-700 mb-2">성능 비교 결과</h3>
        <div class="w-full h-64" id="comparison-chart"></div>
      </div>

      <div class="flex gap-4">
        <div class="result-card flex-1 p-3 rounded-lg flex flex-col items-center justify-center">
          <div class="icon-circle w-12 h-12 rounded-full flex items-center justify-center mb-2">
            <i class="fas fa-bolt text-green-600 text-xl"></i>
          </div>
          <p class="text-lg font-bold text-gray-800">전력 소비량</p>
          <p class="text-3xl font-bold text-green-600">28.1% 감소</p>
          <p class="text-sm text-gray-600 text-center mt-2">vs. 기존 히트펌프</p>
        </div>

        <div class="result-card flex-1 p-3 rounded-lg flex flex-col items-center justify-center">
          <div class="icon-circle w-12 h-12 rounded-full flex items-center justify-center mb-2">
            <i class="fas fa-leaf text-green-600 text-xl"></i>
          </div>
          <p class="text-lg font-bold text-gray-800">탄소 배출량</p>
          <p class="text-3xl font-bold text-green-600">43% 감소</p>
          <p class="text-sm text-gray-600 text-center mt-2">vs. 기존 히트펌프</p>
        </div>
      </div>

      <div class="bg-white p-3 rounded-lg shadow-md mt-3">
        <div class="flex items-center">
          <div class="icon-circle w-10 h-10 rounded-full flex items-center justify-center mr-3">
            <i class="fas fa-certificate text-green-600"></i>
          </div>
          <p class="text-gray-700">
            <span class="font-semibold">KCL 인증:</span>
            이온히팅보일러의 높은 에너지 효율과 탄소 저감 효과는 <span class="physics-link" onclick="openPhysicsReport()">한국물리학회 논문 하이라이트</span>에도 게재되었습니다.
          </p>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  // D3 chart
  function createChart() {
    d3.select('#comparison-chart').selectAll('*').remove();

    const data = [
      { category: '전력 소비량', benchmark: 100, ion_boiler: 71.9, color: '#009688' },
      { category: '탄소 배출량', benchmark: 100, ion_boiler: 57,   color: '#009688' }
    ];

    const width = 500, height = 320;
    const margin = { top: 30, right: 30, bottom: 50, left: 60 };
    const innerWidth = width - margin.left - margin.right;
    const innerHeight = height - margin.top - margin.bottom;

    const svg = d3.select('#comparison-chart')
      .append('svg').attr('width', width).attr('height', height);

    const g = svg.append('g')
      .attr('transform', `translate(${margin.left},${margin.top})`);

    const x = d3.scaleBand()
      .domain(data.map(d => d.category))
      .range([0, innerWidth]).padding(0.3);

    const y = d3.scaleLinear().domain([0, 100]).range([innerHeight, 0]);

    g.append('g').attr('transform', `translate(0,${innerHeight})`)
      .call(d3.axisBottom(x))
      .selectAll('text').style('font-size', '14px').style('font-weight', 'bold');

    g.append('g')
      .call(d3.axisLeft(y).ticks(5).tickFormat(d => d + '%'))
      .selectAll('text').style('font-size', '12px');

    g.append('text')
      .attr('transform', 'rotate(-90)')
      .attr('y', -margin.left + 20)
      .attr('x', -innerHeight / 2)
      .attr('text-anchor', 'middle')
      .text('비율 (%)')
      .style('font-size', '14px');

    g.selectAll('.benchmark-bar')
      .data(data).enter().append('rect')
      .attr('class', 'benchmark-bar')
      .attr('x', d => x(d.category))
      .attr('y', d => y(d.benchmark))
      .attr('width', x.bandwidth() / 2)
      .attr('height', d => innerHeight - y(d.benchmark))
      .attr('fill', '#999').attr('opacity', 0.5);

    g.selectAll('.ion-boiler-bar')
      .data(data).enter().append('rect')
      .attr('class', 'ion-boiler-bar')
      .attr('x', d => x(d.category) + x.bandwidth() / 2)
      .attr('y', d => y(d.ion_boiler))
      .attr('width', x.bandwidth() / 2)
      .attr('height', d => innerHeight - y(d.ion_boiler))
      .attr('fill', d => d.color);

    g.selectAll('.benchmark-label')
      .data(data).enter().append('text')
      .attr('x', d => x(d.category) + x.bandwidth() / 4)
      .attr('y', d => y(d.benchmark) - 5)
      .attr('text-anchor', 'middle')
      .text(d => d.benchmark + '%')
      .style('font-size', '12px').style('font-weight', 'bold').style('fill', '#666');

    g.selectAll('.ion-boiler-label')
      .data(data).enter().append('text')
      .attr('x', d => x(d.category) + x.bandwidth() * 3/4)
      .attr('y', d => y(d.ion_boiler) - 5)
      .attr('text-anchor', 'middle')
      .text(d => d.ion_boiler + '%')
      .style('font-size', '12px').style('font-weight', 'bold').style('fill', '#333');

    const legend = svg.append('g')
      .attr('transform', `translate(${width - margin.right - 100}, ${margin.top - 30})`);

    const legendItems = [
      { label: '미쓰비시 HP', color: '#999', opacity: 0.5 },
      { label: '이온히팅보일러', color: '#009688', opacity: 1 }
    ];

    legendItems.forEach((item, i) => {
      legend.append('rect')
        .attr('x', 0).attr('y', i * 25)
        .attr('width', 15).attr('height', 15)
        .attr('fill', item.color).attr('opacity', item.opacity);

      legend.append('text')
        .attr('x', 25).attr('y', i * 25 + 12)
        .text(item.label).style('font-size', '12px').style('fill', '#333');
    });
  }

  document.addEventListener('DOMContentLoaded', () => setTimeout(createChart, 100));
  window.addEventListener('load', () => setTimeout(createChart, 200));
  window.addEventListener('resize', () => setTimeout(createChart, 100));

  // KCL test report open function
  function openKCLReport() {
    // Open PDF in same window
    window.location.href = '../Docs/KCL PoC test report_en.pdf';
  }

  // Korean Physical Society paper open function
  function openPhysicsReport() {
    // Open PDF in same window
    window.location.href = '../Docs/JP19-0428_G.pdf';
  }
</script>
</body>
</html>